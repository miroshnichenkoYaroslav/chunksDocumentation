# Карта сайта

Элемент предназначен для создания списка, состоящего из ссылок на страницы. В карту в этом случае включается выбранная страница и вложенные в неё страницы.

## Входные параметры: 
+ `С описаниями` – добавление к разделам карты сайта описаний;
+ `Списком` – отображать карту сайта в виде маркированного списка. При отключении этой настройки разделы карты отображаются столбиком, но без обозначения вложенности страниц;
+ `Нумеровать` – нумерация разделов карты;
+ `Дата публикации` – добавление к названиям страниц даты их публикации;
+ `Описание на новой строке` – служит для отображения описание страниц под их названием;
+ `Не показывать корневую страницу` – скрывает ту страницу из списка, которая была выбрана в качестве исходной;
+ `Только первая часть заголовка` – аналогична опции в «Обычной ссылке»;
+ `Включать страницы, которых нет в локальном списке` – позволяет включать в список страницы, для которых стоит флажок «Не показывать в последовательности».
+ `Не включать последний уровень` – ограничить вложенность карты сайта;
+ `Только сокращенное название` – будет использовано сокращенное название.

## Тело чанка:

После пользовательских установок сформируется массив `body`, который будет отправлен на сервер, все элементы, которого имеют тип `string`:
```php
$masBits = [
	0  => "68F9D7B9F991400380A43C0611F9E1CC",
	1  => "4",
	2  => "0",
	3  => "1"
	4  => "1"
	5  => "0"
	6  => "0"
	7  => "0"
	8  => "0"
	9  => "0"
	10 => "18.02.2013"
	11 => "18.02.2013"
	12 => "0"
	13 => "0"
	14 => "0"
	15 => "0"
	16 => "0"
	17 => "0"
	18 => "0"
];
```
## Описание каждого элемента массива:
**1. Вкладка "Элемент" в десктопном клиенте:**

![sitemap](https://github.com/miroshnichenkoYaroslav/chunksDocumentation/blob/master/images/sitemap.jpg)

+ `$masBits[0]` - идентификатор страницы, на которой используется чанк;
+ `$masBits[1]` - тип чанка, в данном случае `4` - это **карта сайта**ж
+ `$masBits[2]` - передается в качестве аргумента в функцию `analyseBit()` - в ней число конвертируется в двоичную систему, полученная строка перегоняется в массив, массив переворачивают, дописуют элементы в массив `0 (int)` до размера массива `10` и возвращают массив флагов `$masFlag`. В десктопной версии это "Свойства элемента";
  - `$masFlag[0]` - с описаниями;
  - `$masFlag[1]` - списком;
  - `$masFlag[2]` - нумеровать;
  - `$masFlag[3]` - дата публикации;
  - `$masFlag[4]` - описание на новой строке;
  - `$masFlag[5]` - не показывать корневую страницу;
  - `$masFlag[6]` - только первая часть заголовка;
  - `$masFlag[7]` - включать страницы, которых нет в локальном списке;
  - `$masFlag[8]` - не включать последний уровень;
  - `$masFlag[9]` - только сокращенное название;
+ `$masBits[3]` - к вложенным страницам;
+ `$masBits[4]` - все уровни вниз;

**2. Вкладка "Настройки списка" в десктопном клиенте**

![sitemap](https://github.com/miroshnichenkoYaroslav/chunksDocumentation/blob/master/images/list-settings.jpg)

+ `$masBits[5]` - лимит (не более);
+ `$masBits[6]` - сортировка, последних опубликованных (новые выше);
+ `$masBits[7]` - не используется в проекте;
+ `$masBits[8]` - отобразить начиная с даты;
+ `$masBits[9]` - отобразить до даты;
+ `$masBits[10]` - дата - опубликованные в период с;
+ `$masBits[11]` - дата - опубликованные в период по;
+ `$masBits[12]` - пагинация;
+ `$masBits[13]` - на одной странице;
+ `$masBits[14]` - не используется в проекте;
+ `$masBits[15]` - не используется в проекте;
+ `$masBits[16]` - не используется в проекте;
+ `$masBits[17]` - категории;
+ `$masBits[18]` - хранит в себе тип ссылки:
	- `$masBits[18][0]` - нормальная;
	- `$masBits[18][1]` - мажорная;
	- `$masBits[18][2]` - пользовательская;
	- `$masBits[18][3]` - динамическая;

### HTML код обычной ссылки

В html документ вставиться такой код:

```html
<!-- Если выбраны флаги список и дата публикации -->
<div class="sitemap">
  <ul>
    <li><a href="#">Page Title</a> <span class="date">(29.06.2017)</span> </li>
    <ul>
      <li><a href="#">Page Title/a> <span class="date">(29.06.2017)</span> </li>
      <li><a href="#">Page Title</a> <span class="date">(29.06.2017)</span> </li>
      <li><a href="#">Page Title</a> <span class="date">(29.06.2017)</span> </li>
      <li><a href="#">Page Title</a> <span class="date">(29.06.2017)</span> </li>
      <li><a href="#">Page Title</a> <span class="date">(29.06.2017)</span> </li>
    </ul>
    <li><a href="#">Page Title</a> <span class="date">(29.06.2017)</span> </li>
  </ul>
</div>

<!-- Если не выбраны флаги список и дата публикации -->
<div class="sitemap">
	<p><a href="#">Page Title</a></p>
	<p><a href="#">Page Title</a></p>
	<p><a href="#">Page Title</a></p>
</div>
```
